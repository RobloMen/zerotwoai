<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zero Two - –ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –ò–Ω—Ç–µ–ª–ª–µ–∫—Ç</title>
    <link rel="icon" type="image/png" href="ZeroTwo.png">
    <!-- TensorFlow.js -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.15.0/dist/tf.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #ff2d95;
            --secondary: #8a2be2;
            --accent: #ff6b6b;
            --kazuha: #4ecdc4;
            --tensorflow: #ff6b00;
            --dark: #1a1a2e;
            --darker: #0f0f1a;
            --light: #f8f9fa;
            --gradient: linear-gradient(135deg, var(--primary), var(--secondary));
            --tensorflow-gradient: linear-gradient(135deg, var(--tensorflow), #ff8c00);
            --glass: rgba(255, 255, 255, 0.1);
            --glass-border: rgba(255, 255, 255, 0.2);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        body {
            background: var(--darker);
            color: var(--light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 30px;
            min-height: 100vh;
        }

        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navigation {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-button {
            padding: 12px 25px;
            border: none;
            border-radius: 15px;
            background: var(--glass);
            color: var(--light);
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
        }

        .nav-button.active {
            background: var(--gradient);
            box-shadow: 0 4px 15px rgba(255, 45, 149, 0.3);
        }

        .nav-button.tensorflow.active {
            background: var(--tensorflow-gradient);
            box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);
        }

        .nav-button:hover {
            transform: translateY(-2px);
        }

        /* –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ */
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ */
        .card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid var(--glass-border);
            border-radius: 20px;
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.4);
        }

        .card h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.8em;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card.tensorflow h2 {
            color: var(--tensorflow);
        }

        .card h2::before {
            content: '‚ú¶';
            color: var(--accent);
        }

        .card.tensorflow h2::before {
            content: 'üß†';
            color: var(--tensorflow);
        }

        /* TensorFlow —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .training-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .control-group {
            background: rgba(255, 107, 0, 0.1);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
        }

        .control-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--tensorflow);
            font-size: 0.9em;
        }

        .control-input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 8px;
            background: rgba(0, 0, 0, 0.3);
            color: var(--light);
            font-size: 0.9em;
        }

        .control-input:focus {
            outline: none;
            border-color: var(--tensorflow);
        }

        .training-button {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: var(--tensorflow-gradient);
            color: white;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255, 107, 0, 0.3);
        }

        .training-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 107, 0, 0.4);
        }

        .training-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .model-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: rgba(255, 107, 0, 0.1);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: 800;
            color: var(--tensorflow);
            display: block;
        }

        .stat-label {
            font-size: 0.8em;
            opacity: 0.8;
            margin-top: 5px;
        }

        .training-log {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            height: 200px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.8em;
            margin-top: 20px;
        }

        .log-entry {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 5px;
        }

        .log-info {
            background: rgba(0, 255, 0, 0.1);
            border-left: 3px solid #00ff00;
        }

        .log-warning {
            background: rgba(255, 255, 0, 0.1);
            border-left: 3px solid #ffff00;
        }

        .log-error {
            background: rgba(255, 0, 0, 0.1);
            border-left: 3px solid #ff0000;
        }

        .training-progress {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--tensorflow-gradient);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }

        .neural-network-viz {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 107, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            position: relative;
            height: 200px;
            overflow: hidden;
        }

        .neuron {
            position: absolute;
            width: 12px;
            height: 12px;
            background: var(--tensorflow);
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .connection {
            position: absolute;
            height: 2px;
            background: rgba(255, 107, 0, 0.5);
            transform-origin: 0 0;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.5; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏... */
    </style>
</head>
<body>
    <div class="container">
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
        <div class="navigation" style="grid-column: 1 / -1;">
            <button class="nav-button active" onclick="switchTab('main')">Zero Two AI</button>
            <button class="nav-button tensorflow" onclick="switchTab('tensorflow')">TensorFlow –û–±—É—á–µ–Ω–∏–µ</button>
        </div>

        <!-- –í–∫–ª–∞–¥–∫–∞ TensorFlow –æ–±—É—á–µ–Ω–∏—è -->
        <div id="tensorflow-tab" class="tab-content active">
            <div class="main-content">
                <header class="header" style="background: rgba(255, 107, 0, 0.1); border: 1px solid rgba(255, 107, 0, 0.3);">
                    <h1 class="title" style="background: var(--tensorflow-gradient); -webkit-background-clip: text;">TensorFlow.js –û–±—É—á–µ–Ω–∏–µ</h1>
                    <p class="subtitle">–ù–µ–π—Ä–æ—Å–µ—Ç–µ–≤–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ</p>
                    <div class="badge" style="background: var(--tensorflow-gradient);">TensorFlow.js ‚Ä¢ –û–±—É—á–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏</div>
                </header>

                <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏–µ–º -->
                <section class="card tensorflow">
                    <h2>‚öôÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏–µ–º</h2>
                    <div class="training-controls">
                        <div class="control-group">
                            <label class="control-label">–≠–ø–æ—Ö–∏ –æ–±—É—á–µ–Ω–∏—è</label>
                            <input type="number" class="control-input" id="epochs" value="50" min="1" max="1000">
                        </div>
                        <div class="control-group">
                            <label class="control-label">–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞</label>
                            <input type="number" class="control-input" id="batchSize" value="32" min="1" max="128">
                        </div>
                        <div class="control-group">
                            <label class="control-label">–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—É—á–µ–Ω–∏—è</label>
                            <input type="number" class="control-input" id="learningRate" value="0.001" step="0.001" min="0.0001" max="0.1">
                        </div>
                        <div class="control-group">
                            <label class="control-label">–†–∞–∑–º–µ—Ä —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è</label>
                            <input type="number" class="control-input" id="hiddenUnits" value="128" min="16" max="512">
                        </div>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 15px;">
                        <button class="training-button" onclick="startTraining()" id="trainButton">üéØ –ù–∞—á–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ</button>
                        <button class="training-button" onclick="stopTraining()" id="stopButton" disabled>‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
                        <button class="training-button" onclick="resetModel()" id="resetButton">üîÑ –°–±—Ä–æ—Å–∏—Ç—å –º–æ–¥–µ–ª—å</button>
                    </div>
                </section>

                <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥–µ–ª–∏ -->
                <section class="card tensorflow">
                    <h2>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –º–æ–¥–µ–ª–∏</h2>
                    <div class="model-stats">
                        <div class="stat-card">
                            <span class="stat-value" id="currentEpoch">0</span>
                            <span class="stat-label">–¢–µ–∫—É—â–∞—è —ç–ø–æ—Ö–∞</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="currentLoss">0.0000</span>
                            <span class="stat-label">–ü–æ—Ç–µ—Ä–∏</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="currentAccuracy">0%</span>
                            <span class="stat-label">–¢–æ—á–Ω–æ—Å—Ç—å</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="trainingTime">0s</span>
                            <span class="stat-label">–í—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è</span>
                        </div>
                    </div>
                    <div class="training-progress">
                        <div class="progress-fill" id="trainingProgress"></div>
                    </div>
                </section>

                <!-- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ -->
                <section class="card tensorflow">
                    <h2>üîç –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏</h2>
                    <div class="neural-network-viz" id="networkViz">
                        <!-- –ù–µ–π—Ä–æ–Ω—ã –∏ —Å–≤—è–∑–∏ –±—É–¥—É—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è JavaScript -->
                    </div>
                </section>

                <!-- –õ–æ–≥ –æ–±—É—á–µ–Ω–∏—è -->
                <section class="card tensorflow">
                    <h2>üìù –õ–æ–≥ –æ–±—É—á–µ–Ω–∏—è</h2>
                    <div class="training-log" id="trainingLog">
                        <div class="log-entry log-info">–°–∏—Å—Ç–µ–º–∞ TensorFlow.js –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞</div>
                        <div class="log-entry log-info">–ì–æ—Ç–æ–≤ –∫ –æ–±—É—á–µ–Ω–∏—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏</div>
                    </div>
                </section>

                <!-- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏ -->
                <section class="card tensorflow">
                    <h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏</h2>
                    <div style="display: flex; gap: 10px; margin-bottom: 15px;">
                        <input type="text" class="control-input" id="testInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∞..." style="flex: 1;">
                        <button class="training-button" onclick="testModel()" id="testButton">–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
                    </div>
                    <div id="testResults" style="background: rgba(255, 107, 0, 0.1); border-radius: 10px; padding: 15px; min-height: 60px;">
                        –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...
                    </div>
                </section>
            </div>

            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å -->
            <div class="chat-sidebar">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏ -->
                <div class="card tensorflow">
                    <h2>üß† –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥–µ–ª–∏</h2>
                    <div class="model-stats">
                        <div class="stat-card">
                            <span class="stat-value" id="modelLayers">3</span>
                            <span class="stat-label">–°–ª–æ—è</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="totalParams">0</span>
                            <span class="stat-label">–ü–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="vocabSize">1000</span>
                            <span class="stat-label">–°–ª–æ–≤ –≤ —Å–ª–æ–≤–∞—Ä–µ</span>
                        </div>
                    </div>
                    <div style="margin-top: 15px; font-size: 0.9em;">
                        <strong>–¢–∏–ø –º–æ–¥–µ–ª–∏:</strong> LSTM + Dense<br>
                        <strong>–ê–∫—Ç–∏–≤–∞—Ü–∏—è:</strong> ReLU + Softmax<br>
                        <strong>–û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä:</strong> Adam
                    </div>
                </div>

                <!-- –î–∞–Ω–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è -->
                <div class="card tensorflow">
                    <h2>üìö –î–∞–Ω–Ω—ã–µ –æ–±—É—á–µ–Ω–∏—è</h2>
                    <div class="model-stats">
                        <div class="stat-card">
                            <span class="stat-value" id="trainingSamples">500</span>
                            <span class="stat-label">–ü—Ä–∏–º–µ—Ä–æ–≤</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="validationSplit">20%</span>
                            <span class="stat-label">–í–∞–ª–∏–¥–∞—Ü–∏—è</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="dataSize">150KB</span>
                            <span class="stat-label">–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö</span>
                        </div>
                    </div>
                </div>

                <!-- –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏ -->
                <div class="card tensorflow">
                    <h2>üíæ –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏</h2>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button class="training-button" onclick="saveModel()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –º–æ–¥–µ–ª—å</button>
                        <button class="training-button" onclick="loadModel()">üìÇ –ó–∞–≥—Ä—É–∑–∏—Ç—å –º–æ–¥–µ–ª—å</button>
                        <button class="training-button" onclick="exportModel()">üì§ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // TensorFlow.js —Å–∏—Å—Ç–µ–º–∞ –æ–±—É—á–µ–Ω–∏—è
        let model;
        let isTraining = false;
        let trainingStartTime;
        let currentEpoch = 0;
        let trainingData = [];
        let vocabulary = new Set();
        const MAX_VOCAB_SIZE = 1000;

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–æ–¥–µ–ª–∏
        async function createModel(hiddenUnits = 128) {
            const model = tf.sequential({
                layers: [
                    tf.layers.dense({
                        inputShape: [MAX_VOCAB_SIZE],
                        units: hiddenUnits,
                        activation: 'relu'
                    }),
                    tf.layers.dropout({ rate: 0.3 }),
                    tf.layers.dense({
                        units: hiddenUnits / 2,
                        activation: 'relu'
                    }),
                    tf.layers.dense({
                        units: 10, // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–ª–∞—Å—Å–æ–≤ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
                        activation: 'softmax'
                    })
                ]
            });

            model.compile({
                optimizer: tf.train.adam(parseFloat(document.getElementById('learningRate').value)),
                loss: 'categoricalCrossentropy',
                metrics: ['accuracy']
            });

            return model;
        }

        // –°–æ–∑–¥–∞–Ω–∏–µ —Å–ª–æ–≤–∞—Ä—è
        function buildVocabulary(texts) {
            vocabulary.clear();
            texts.forEach(text => {
                const words = text.toLowerCase().split(/\s+/);
                words.forEach(word => {
                    if (word.length > 2 && vocabulary.size < MAX_VOCAB_SIZE) {
                        vocabulary.add(word);
                    }
                });
            });
            return vocabulary;
        }

        // –í–µ–∫—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞
        function textToVector(text) {
            const words = text.toLowerCase().split(/\s+/);
            const vector = new Array(MAX_VOCAB_SIZE).fill(0);
            const vocabArray = Array.from(vocabulary);
            
            words.forEach(word => {
                const index = vocabArray.indexOf(word);
                if (index !== -1) {
                    vector[index] = 1;
                }
            });
            
            return vector;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
        function generateTrainingData() {
            const sampleTexts = [
                "–ø—Ä–∏–≤–µ—Ç –∫–∞–∫ –¥–µ–ª–∞ —Å–µ–≥–æ–¥–Ω—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –ø–æ–≥–æ–¥–∞",
                "—è –ª—é–±–ª—é –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ",
                "–Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —ç—Ç–æ –æ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω–æ",
                "–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ python –∏ javascript",
                "—Ç–µ–Ω–∑–æ—Ä—Ñ–ª–æ—É –æ—Ç –≥—É–≥–ª –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è",
                "–≥–ª—É–±–æ–∫–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω–æ–µ –∑—Ä–µ–Ω–∏–µ",
                "–æ–±—Ä–∞–±–æ—Ç–∫–∞ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞ –Ω–ª–ø",
                "–¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ –º–æ–¥–µ–ª–µ–π –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è",
                "–∞–ª–≥–æ—Ä–∏—Ç–º—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏",
                "–≤–µ–± —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è",
                // –î–æ–±–∞–≤–ª—è–µ–º –±–æ–ª—å—à–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
                "—Å–µ–≥–æ–¥–Ω—è —Å–æ–ª–Ω–µ—á–Ω—ã–π –¥–µ–Ω—å –∏ —è —Å—á–∞—Å—Ç–ª–∏–≤",
                "–º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç –º–∏—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π",
                "python –ª—É—á—à–∏–π —è–∑—ã–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∞–Ω–Ω—ã—Ö",
                "–∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –±—É–¥—É—â–µ–µ —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–∞",
                "–≥–ª—É–±–æ–∫–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ —Å–ª–æ–∂–Ω—ã –Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã"
            ];

            buildVocabulary(sampleTexts);
            
            trainingData = sampleTexts.map((text, index) => ({
                input: textToVector(text),
                output: Array(10).fill(0).map((_, i) => i === index % 10 ? 1 : 0)
            }));

            document.getElementById('trainingSamples').textContent = trainingData.length;
            document.getElementById('vocabSize').textContent = vocabulary.size;
        }

        // –ù–∞—á–∞–ª–æ –æ–±—É—á–µ–Ω–∏—è
        async function startTraining() {
            if (isTraining) return;
            
            isTraining = true;
            document.getElementById('trainButton').disabled = true;
            document.getElementById('stopButton').disabled = false;
            document.getElementById('testButton').disabled = true;
            
            const epochs = parseInt(document.getElementById('epochs').value);
            const batchSize = parseInt(document.getElementById('batchSize').value);
            const hiddenUnits = parseInt(document.getElementById('hiddenUnits').value);
            
            // –°–æ–∑–¥–∞–µ–º –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ–º –º–æ–¥–µ–ª—å
            if (model) {
                model.dispose();
            }
            model = await createModel(hiddenUnits);
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
            generateTrainingData();
            
            // –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ–Ω–∑–æ—Ä—ã
            const inputs = tf.tensor2d(trainingData.map(d => d.input));
            const outputs = tf.tensor2d(trainingData.map(d => d.output));
            
            trainingStartTime = Date.now();
            currentEpoch = 0;
            
            addLog('–ù–∞—á–∞–ª–æ –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–∏...', 'info');
            visualizeNetwork();
            
            // –¶–∏–∫–ª –æ–±—É—á–µ–Ω–∏—è
            for (let epoch = 1; epoch <= epochs && isTraining; epoch++) {
                currentEpoch = epoch;
                
                const history = await model.fit(inputs, outputs, {
                    epochs: 1,
                    batchSize: batchSize,
                    shuffle: true,
                    validationSplit: 0.2
                });
                
                const loss = history.history.loss[0];
                const accuracy = history.history.acc ? history.history.acc[0] : 0;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º UI
                updateTrainingStats(epoch, loss, accuracy);
                updateNetworkVisualization();
                
                // –î–æ–±–∞–≤–ª—è–µ–º –ª–æ–≥ –∫–∞–∂–¥—ã–µ 10 —ç–ø–æ—Ö
                if (epoch % 10 === 0) {
                    addLog(`–≠–ø–æ—Ö–∞ ${epoch}: –ü–æ—Ç–µ—Ä–∏ = ${loss.toFixed(4)}, –¢–æ—á–Ω–æ—Å—Ç—å = ${(accuracy * 100).toFixed(1)}%`, 'info');
                }
                
                // –î–∞–µ–º –±—Ä–∞—É–∑–µ—Ä—É –≤—Ä–µ–º—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è UI
                await tf.nextFrame();
            }
            
            finishTraining();
        }

        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—É—á–µ–Ω–∏—è
        function stopTraining() {
            isTraining = false;
            addLog('–û–±—É—á–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º', 'warning');
            finishTraining();
        }

        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏—è
        function finishTraining() {
            isTraining = false;
            document.getElementById('trainButton').disabled = false;
            document.getElementById('stopButton').disabled = true;
            document.getElementById('testButton').disabled = false;
            
            const trainingTime = ((Date.now() - trainingStartTime) / 1000).toFixed(1);
            document.getElementById('trainingTime').textContent = trainingTime + 's';
            
            addLog('–û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!', 'info');
            updateModelParams();
        }

        // –°–±—Ä–æ—Å –º–æ–¥–µ–ª–∏
        function resetModel() {
            if (model) {
                model.dispose();
                model = null;
            }
            
            currentEpoch = 0;
            document.getElementById('currentEpoch').textContent = '0';
            document.getElementById('currentLoss').textContent = '0.0000';
            document.getElementById('currentAccuracy').textContent = '0%';
            document.getElementById('trainingProgress').style.width = '0%';
            document.getElementById('trainingTime').textContent = '0s';
            
            addLog('–ú–æ–¥–µ–ª—å —Å–±—Ä–æ—à–µ–Ω–∞', 'info');
        }

        // –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–∏
        async function testModel() {
            if (!model) {
                addLog('–ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞!', 'error');
                return;
            }
            
            const testText = document.getElementById('testInput').value;
            if (!testText) {
                addLog('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–∫—Å—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'warning');
                return;
            }
            
            const vector = textToVector(testText);
            const input = tf.tensor2d([vector]);
            
            const prediction = model.predict(input);
            const results = await prediction.data();
            
            input.dispose();
            prediction.dispose();
            
            // –ê–Ω–∞–ª–∏–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            const maxConfidence = Math.max(...results);
            const predictedClass = results.indexOf(maxConfidence);
            
            let analysis = `
                <strong>–¢–µ–∫—Å—Ç:</strong> "${testText}"<br>
                <strong>–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:</strong> ${(maxConfidence * 100).toFixed(1)}%<br>
                <strong>–ö–ª–∞—Å—Å:</strong> ${predictedClass}<br>
                <strong>–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</strong><br>
            `;
            
            results.forEach((conf, idx) => {
                analysis += `–ö–ª–∞—Å—Å ${idx}: ${(conf * 100).toFixed(1)}%<br>`;
            });
            
            document.getElementById('testResults').innerHTML = analysis;
            addLog(`–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω —Ç–µ–∫—Å—Ç: "${testText}"`, 'info');
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–±—É—á–µ–Ω–∏—è
        function updateTrainingStats(epoch, loss, accuracy) {
            document.getElementById('currentEpoch').textContent = epoch;
            document.getElementById('currentLoss').textContent = loss.toFixed(4);
            document.getElementById('currentAccuracy').textContent = (accuracy * 100).toFixed(1) + '%';
            
            const epochsTotal = parseInt(document.getElementById('epochs').value);
            const progress = (epoch / epochsTotal) * 100;
            document.getElementById('trainingProgress').style.width = progress + '%';
            
            const elapsedTime = ((Date.now() - trainingStartTime) / 1000).toFixed(1);
            document.getElementById('trainingTime').textContent = elapsedTime + 's';
        }

        // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏
        function visualizeNetwork() {
            const container = document.getElementById('networkViz');
            container.innerHTML = '';
            
            const layers = [4, 6, 4, 3]; // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–µ–π—Ä–æ–Ω–æ–≤ –≤ –∫–∞–∂–¥–æ–º —Å–ª–æ–µ
            const layerSpacing = 80;
            const neuronSpacing = 30;
            
            let connections = [];
            
            // –°–æ–∑–¥–∞–µ–º –Ω–µ–π—Ä–æ–Ω—ã
            layers.forEach((neuronCount, layerIndex) => {
                for (let i = 0; i < neuronCount; i++) {
                    const x = 50 + layerIndex * layerSpacing;
                    const y = 50 + i * neuronSpacing;
                    
                    const neuron = document.createElement('div');
                    neuron.className = 'neuron';
                    neuron.style.left = x + 'px';
                    neuron.style.top = y + 'px';
                    neuron.style.animationDelay = (Math.random() * 2) + 's';
                    container.appendChild(neuron);
                    
                    // –°–æ–∑–¥–∞–µ–º —Å–≤—è–∑–∏ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º —Å–ª–æ–µ–º
                    if (layerIndex > 0) {
                        const prevLayerCount = layers[layerIndex - 1];
                        for (let j = 0; j < prevLayerCount; j++) {
                            const prevX = 50 + (layerIndex - 1) * layerSpacing;
                            const prevY = 50 + j * neuronSpacing;
                            
                            const connection = document.createElement('div');
                            connection.className = 'connection';
                            
                            const length = Math.sqrt(Math.pow(x - prevX, 2) + Math.pow(y - prevY, 2));
                            const angle = Math.atan2(y - prevY, x - prevX) * 180 / Math.PI;
                            
                            connection.style.width = length + 'px';
                            connection.style.left = prevX + 'px';
                            connection.style.top = prevY + 'px';
                            connection.style.transform = `rotate(${angle}deg)`;
                            connection.style.opacity = 0.3 + Math.random() * 0.4;
                            
                            container.appendChild(connection);
                            connections.push(connection);
                        }
                    }
                }
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è
        function updateNetworkVisualization() {
            const neurons = document.querySelectorAll('.neuron');
            const connections = document.querySelectorAll('.connection');
            
            // –ê–Ω–∏–º–∏—Ä—É–µ–º –Ω–µ–π—Ä–æ–Ω—ã
            neurons.forEach(neuron => {
                if (Math.random() > 0.7) {
                    neuron.style.opacity = 0.8 + Math.random() * 0.2;
                }
            });
            
            // –ê–Ω–∏–º–∏—Ä—É–µ–º —Å–≤—è–∑–∏
            connections.forEach(connection => {
                if (Math.random() > 0.8) {
                    connection.style.opacity = 0.4 + Math.random() * 0.3;
                }
            });
        }

        // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–ø–∏—Å–∏ –≤ –ª–æ–≥
        function addLog(message, type = 'info') {
            const log = document.getElementById('trainingLog');
            const entry = document.createElement('div');
            entry.className = `log-entry log-${type}`;
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log.appendChild(entry);
            log.scrollTop = log.scrollHeight;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–¥–µ–ª–∏
        function updateModelParams() {
            if (model) {
                let totalParams = 0;
                model.layers.forEach(layer => {
                    layer.getWeights().forEach(weight => {
                        totalParams += weight.size;
                    });
                });
                document.getElementById('totalParams').textContent = totalParams.toLocaleString();
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
        async function saveModel() {
            if (!model) {
                addLog('–ù–µ—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è', 'error');
                return;
            }
            
            try {
                await model.save('downloads://zero-two-model');
                addLog('–ú–æ–¥–µ–ª—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'info');
            } catch (error) {
                addLog('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏: ' + error.message, 'error');
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
        async function loadModel() {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
            addLog('–§—É–Ω–∫—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥–µ–ª–∏ –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ', 'info');
        }

        // –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏
        function exportModel() {
            if (!model) {
                addLog('–ù–µ—Ç –º–æ–¥–µ–ª–∏ –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                return;
            }
            
            const modelInfo = {
                architecture: model.layers.map(layer => ({
                    type: layer.getClassName(),
                    config: layer.getConfig()
                })),
                trainingInfo: {
                    epochs: currentEpoch,
                    vocabularySize: vocabulary.size,
                    trainingSamples: trainingData.length
                }
            };
            
            const dataStr = JSON.stringify(modelInfo, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = 'zero-two-model-config.json';
            link.click();
            
            addLog('–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –º–æ–¥–µ–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞', 'info');
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.nav-button').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tabName + '-tab').classList.add('active');
            event.target.classList.add('active');
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            addLog('TensorFlow.js –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ', 'info');
            visualizeNetwork();
            generateTrainingData();
        });
    </script>
</body>
</html>
